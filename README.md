## Yesterday's Trip

### 1. 기획
네이버 지도, 구석구석(축제 일정 제공 서비스)를 사용하며 더 필요하다고 느낀 것
1. 관광지, 축제에 대한 리뷰가 부족
2. 가려고 하는 관광지 근처에 묶어서 갈만한 여행지도 직접 검색 필요
3. 관심있는 지역, 관광지, 축제에 대한 새로운 이벤트도 직접 검색 필요

보완이 필요한 부분을 아래와 같이 해결
1. 네이버 맵과 함께 관광지, 축제에 대한 리뷰 작성 및 조회
2. 지역별 평점이 높고 가까운 관광지 리스트 추천
3. 사용자는 관심있는 지역 팔로우, 지역 관리자가 새로운 관광지 추가시 팔로워들에게 실시간 알림 제공

### 2. 사용 기술
<img src="img.png" width="400" height="300"/>

#### 1. back
- spring boot
- spring security
- mysql
- redis
- jwt
- docker
- ec2
- s3

#### 2. front
- vue.js
- pinia
- axios
- scss

### 3. 기능
#### 1. 메인 페이지

<img src="img_1.png" width="600" height="400"/>

로그인과 회원가입 또는 베스트 여행지를 추천해주고, 헤더의 검색창을 통해서 지도 페이지로 이동할 수 있다.

#### 2. 회원가입

<img src="회원가입.gif" width="600" height="400"/>

회원 가입을 진행할 때 아래와 같은 절차를 검증해야 회원가입을 할 수 있다.
- 이메일 중복 검증
- 해당 이메일로 발송된 인증 코드 검증
#### 3. 로그인
<img src="로그인.gif" width="600" height="400"/>

#### 4. 임시비밀번호 발급
<img src="임시_비밀번호_발급.gif" width="600" height="400"/>

만약 비밀번호를 모른다면, 이메일을 입력하고 해당 이메일로 발송된 임시 비밀번호로 로그인 할 수 있다.

#### 5. 컨텐츠 조회, 리뷰 작성

<img src="베스트여행지_클러스터링_리뷰.gif" width="600" height="400"/>

지도 페이지에서는 '시도, 구군, 컨텐츠'타입을 이용해 컨텐츠 조회나, 키워드로 컨텐츠를 조회할 수 있다.
또한 조회한 컨텐츠에대해서 리뷰를 작성도 할 수 있다.

<img src="리뷰_작성.gif" width="600" height="400"/>

#### 6. 지역 팔로잉
<img src="시도_팔로잉.gif" width="600" height="400"/>

<img src="관리자_컨텐츠_추가_알람.gif" width="600" height="400"/>

관심있는 지역을 팔로우 할 수 있으며, SSE(Server Sent Event)를 활용해서 팔로우한 시도의 새 컨텐츠의 알람을 즉시 조회할 수 있다.


### ERD
<img src="yesterday_erd.PNG" width="800" height="800"/>

### 후기
1. 협업
    - 파트를 명확히 나눠 팀 프로젝트를 처음 겪어보면서 프론트엔드와 목표를 향해 협업하는 방법에 대한 고민
    - 설계시에 자세한 요구사항 명세, API 명세, 백과 프론트 사이의 서비스 플로우에 대한 중요성
2. DB 설계 및 쿼리
    - 동일한 데이터도 API로 받아올지, 무결성과 API 이용비를 고려해 DB에 저장할지에 대한 고민
    - 원하는 기능을 위한 DB로 관리하기 위한 설계 방법 고민
    - ORM(JPA)를 먼저 경험하고 SQL Mapper(Mybatis)를 경험하면서 깨달은 것
      1. JPA N+1 문제 해결을 위해 fetch join을 사용했던 것과 같이 Mybatis  Collection을 사용해 해결
      2. 인라인 뷰 쿼리(내부쿼리)에서 메인쿼리(외부쿼리)의 컬럼에 접근가능
      3. insert values 대신 select 쿼리의 다중행 결과를 이용한 다중 insert 
